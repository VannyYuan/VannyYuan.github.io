

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;dark&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Vanny Yuan">
  <meta name="keywords" content="">
  <title>å·¥å…·æ¶ç•Œé¢å¼€å‘ - Vanny Yuan&#39;s Blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/atom-one-dark.min.css" />
  

  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_6peoq002giu.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.1.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Vanny Yuan's Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container page-header text-center fade-in-up">
            <span class="h2" id="subtitle">
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-10-09 18:00" pubdate>
      2020å¹´10æœˆ9æ—¥ æ™šä¸Š
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.6k å­—
    </span>
  

  

  
  
    
      <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> æ¬¡
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" id="post">
            <!-- SEO header -->
            <h1 style="display: none">å·¥å…·æ¶ç•Œé¢å¼€å‘</h1>
            
            <div class="markdown-body" id="post-body">
              <p>&emsp;&emsp;æœ€è¿‘æœ‰ä¸€ä¸ªä»»åŠ¡æ˜¯å¼€å‘å·¥å…·æ¶ï¼Œä¸»è¦åŠŸèƒ½ä¸ºå·¥å…·çš„æ˜¾ç¤ºå’Œç¼–è¾‘ã€‚ç”±äºè¿™æ¬¡å¼€å‘æ¶‰åŠæœªæ¥è§¦è¿‡çš„çŸ¥è¯†ç‚¹æ¯”è¾ƒå¤šï¼Œè€Œä¸”å¯¹ç¾è§‚è®¾è®¡æ–¹é¢ä¹Ÿæœ‰æ‰€æ¬ ç¼ºï¼Œå› æ­¤å¼€å‘å‘¨æœŸæ¯”è¾ƒé•¿ï¼Œä½†æ”¶è·è‰¯å¤šã€‚</p>
<p>&emsp;&emsp;Qtæ˜¯è·¨å¹³å°çš„ï¼Œè™½ç„¶è¯¥å·¥å…·ä¸»è¦æ˜¯åœ¨ Maya ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯åŒæ ·å¯ä»¥æ‹“å±•åˆ°å…¶ä»–å¹³å°ä¸Šã€‚åœ¨å¼€å‘è¿™ä¸ªå·¥å…·çš„è¿‡ç¨‹ä¸­æ›´åŠ æ·±å…¥å­¦ä¹ äº† Qt çš„ MVC æ¡†æ¶ä»¥åŠå¯¹æ¥æ•°æ®åº“çš„ QSql ç›¸å…³çš„çŸ¥è¯†ï¼Œä¸‹é¢è¯¦ç»†è®²ä¸€ä¸‹è¿™ä¸ªå·¥å…·è¿‡ç¨‹å’Œæ¼”ç¤ºã€‚</p>
<hr>
<h1 id="ğŸ™-å·¥å…·å±•ç¤º"><a href="#ğŸ™-å·¥å…·å±•ç¤º" class="headerlink" title="ğŸ™ å·¥å…·å±•ç¤º"></a>ğŸ™ å·¥å…·å±•ç¤º</h1><h2 id="ç•Œé¢å±•ç¤º"><a href="#ç•Œé¢å±•ç¤º" class="headerlink" title="ç•Œé¢å±•ç¤º"></a>ç•Œé¢å±•ç¤º</h2><ul>
<li>ç”¨æˆ·ç•Œé¢<br>ç”¨æˆ·æ¨¡å¼ä¸»è¦è¿›è¡Œå·¥å…·çš„è°ƒç”¨ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/1.png" srcset="/img/loading.gif"></li>
<li>ç®¡ç†å‘˜ç•Œé¢<br>ç®¡ç†å‘˜æ¨¡å¼ä¸»è¦è¿›è¡Œå·¥å…·çš„ç¼–è¾‘ï¼ŒåŠŸèƒ½åŒ…æ‹¬å·¥å…·çš„å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€ç§»åŠ¨ã€æ”¹å˜åˆ†ç»„ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/2.png" srcset="/img/loading.gif"></li>
</ul>
<hr>
<h2 id="é€šç”¨åŠŸèƒ½"><a href="#é€šç”¨åŠŸèƒ½" class="headerlink" title="é€šç”¨åŠŸèƒ½"></a>é€šç”¨åŠŸèƒ½</h2><ol>
<li>åˆ‡æ¢ç»„åˆ†ç±»<br>é€šè¿‡ç‚¹å‡»ç»„é€‰é¡¹æ¡†ï¼Œé€‰æ‹©éœ€è¦åˆ‡æ¢çš„ç»„åï¼Œå³å¯æ›´æ”¹è§†å›¾ä¸­æ˜¾ç¤ºçš„å·¥å…·ä¸ºæ‰€é€‰ç»„å†…çš„å·¥å…·ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/14.gif" srcset="/img/loading.gif"></li>
<li>æœç´¢å·¥å…·<br>é€šè¿‡åœ¨æœç´¢æ¡†ä¸­è¾“å…¥éœ€è¦æœç´¢çš„å·¥å…·åç§°æˆ–å¤‡æ³¨ä¿¡æ¯ï¼Œå³å¯ä»è§†å›¾ä¸­ç­›é€‰ç¬¦åˆæœç´¢æ¡ä»¶çš„å·¥å…·å¹¶æ˜¾ç¤ºã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/15.gif" srcset="/img/loading.gif"></li>
<li>åˆ‡æ¢ç”¨æˆ·æ¨¡å¼ä¸ç®¡ç†å‘˜æ¨¡å¼<br>å¯ä»¥é€šè¿‡ç‚¹å‡»è®¾ç½®èœå•ä¸­çš„â€œè¿›å…¥ç”¨æˆ·/ç®¡ç†å‘˜æ¨¡å¼â€è¿›è¡Œå·¥å…·æ¨¡å¼åˆ‡æ¢ã€‚<br>å½“å·¥å…·é¦–æ¬¡è¿›å…¥ç®¡ç†å‘˜æ¨¡å¼æ—¶ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼Œåªæœ‰åœ¨å¯†ç è¾“å…¥æ­£ç¡®åæ‰èƒ½è¿›å…¥ç®¡ç†å‘˜æ¨¡å¼ï¼Œåœ¨ä¸‹æ¬¡åˆå§‹åŒ–å·¥å…·å‰ä¸éœ€è¦é‡æ–°è¾“å…¥å¯†ç è¿›å…¥ç®¡ç†å‘˜æ¨¡å¼ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/17.gif" srcset="/img/loading.gif"></li>
<li>æŠ˜å ç•Œé¢<br>å¯ä»¥é€šè¿‡ç‚¹å‡»å·¥å…·å³ä¸Šè§’çš„ â€œ-â€ æŒ‰é’®ï¼ŒæŠŠç•Œé¢è¿›è¡ŒæŠ˜å æˆ–è€…å±•å¼€ã€‚æŠ˜å åçš„æ ‡é¢˜æ å¯ä»¥ç‚¹å‡»è¿›è¡Œæ‹–æ‹½ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/22.gif" srcset="/img/loading.gif"></li>
<li>çª—å£æ‹–æ‹½<br>å¯ä»¥åœ¨ç•Œé¢ç©ºç™½å¤„æŒ‰ä½é¼ æ ‡å·¦é”®å¹¶ç§»åŠ¨é¼ æ ‡ï¼Œå®ç°ç•Œé¢æ‹–æ‹½åŠŸèƒ½ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/23.gif" srcset="/img/loading.gif"></li>
<li>çª—å£ç¼©æ”¾<br>å¯ä»¥æŠŠé¼ æ ‡ç§»åŠ¨åˆ°çª—å£è¾¹ç¼˜ï¼Œå½“é¼ æ ‡å‡ºç°ç¼©æ”¾æ ·å¼æ—¶ï¼Œå¯ä»¥æŒ‰ä½é¼ æ ‡å·¦é”®å¹¶ç§»åŠ¨é¼ æ ‡ï¼Œå®ç°ç•Œé¢ç¼©æ”¾åŠŸèƒ½ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/24.gif" srcset="/img/loading.gif"></li>
</ol>
<hr>
<h2 id="ç”¨æˆ·åŠŸèƒ½å±•ç¤º"><a href="#ç”¨æˆ·åŠŸèƒ½å±•ç¤º" class="headerlink" title="ç”¨æˆ·åŠŸèƒ½å±•ç¤º"></a>ç”¨æˆ·åŠŸèƒ½å±•ç¤º</h2><ol>
<li>åˆ‡æ¢è§†å›¾æ˜¾ç¤ºæ¨¡å¼<br>åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œå·¥å…·è§†å›¾æ˜¾ç¤ºæ¨¡å¼æœ‰åˆ—è¡¨æ˜¾ç¤ºå’Œå›¾æ ‡æ˜¾ç¤ºä¸¤ç§ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»è®¾ç½®èœå•ä¸Šçš„â€œåˆ‡æ¢æ˜¾ç¤ºæ¨¡å¼â€ï¼Œå¯¹è§†å›¾çš„æ˜¾ç¤ºæ¨¡å¼è¿›è¡Œäº¤æ›¿æ›´æ¢ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/3.gif" srcset="/img/loading.gif"></li>
<li>è°ƒèŠ‚è§†å›¾æ˜¾ç¤ºæ¯”ä¾‹<br>åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œå¯ä»¥é€šè¿‡æ»‘åŠ¨è®¾ç½®èœå•ä¸Šçš„â€œè°ƒèŠ‚æ˜¾ç¤ºæ¯”ä¾‹â€çš„æ»‘åŠ¨æ¡ï¼Œå¯¹è§†å›¾çš„æ˜¾ç¤ºæ¯”ä¾‹è¿›è¡Œç¼©æ”¾ã€‚<br>ä¸åŒæ˜¾ç¤ºæ¨¡å¼è§†å›¾çš„ç¼©æ”¾å€¼å®Œå…¨ç‹¬ç«‹ï¼Œè°ƒèŠ‚æ¯”ä¾‹æ—¶ä»…å¯¹å½“å‰æ˜¾ç¤ºæ¨¡å¼è§†å›¾ç”Ÿæ•ˆï¼Œä¸å½±å“å…¶ä»–æ˜¾ç¤ºæ¨¡å¼æ¯”ä¾‹ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/4.gif" srcset="/img/loading.gif"></li>
<li>æŸ¥çœ‹å¤‡æ³¨<br>åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œå½“é¼ æ ‡æ‚¬åœåœ¨å·¥å…·ä¸Šï¼Œä¼šå¼¹å‡ºè¯¥å·¥å…·çš„å¤‡æ³¨ã€‚<br>å¯¹äºè®¾ç½®äº†è¯´æ˜æ–‡æ¡£é“¾æ¥çš„å·¥å…·ï¼Œè¿˜å¯ä»¥ç‚¹å‡»â€œHelpâ€æ‰“å¼€è¯´æ˜é“¾æ¥ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/16.gif" srcset="/img/loading.gif"></li>
<li>è¿è¡Œå·¥å…·<br>&emsp;&emsp;å•å‡»ç”¨æˆ·ç•Œé¢ä¸­çš„å·¥å…·å³å¯è¿è¡Œé€‰ä¸­å·¥å…·ã€‚</li>
</ol>
<hr>
<h2 id="ç®¡ç†å‘˜åŠŸèƒ½å±•ç¤º"><a href="#ç®¡ç†å‘˜åŠŸèƒ½å±•ç¤º" class="headerlink" title="ç®¡ç†å‘˜åŠŸèƒ½å±•ç¤º"></a>ç®¡ç†å‘˜åŠŸèƒ½å±•ç¤º</h2><h3 id="ç¼–è¾‘å·¥å…·"><a href="#ç¼–è¾‘å·¥å…·" class="headerlink" title="ç¼–è¾‘å·¥å…·"></a>ç¼–è¾‘å·¥å…·</h3><ol>
<li>åœ¨å½“å‰è¡Œå‰æ’å…¥å·¥å…·<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œé€‰ä¸­å…¶ä¸­ä¸€è¡Œå·¥å…·ï¼Œç‚¹å‡»å›¾ç¤ºâ€œæ·»åŠ â€æŒ‰é’®ï¼Œå¯ä»¥åœ¨é€‰ä¸­è¡Œå‰æ’å…¥ä¸€è¡Œæ–°å·¥å…·ã€‚<br>å¦‚æœå½“å‰ç»„ä¸æ˜¯ All ç»„ï¼Œåˆ›å»ºçš„å·¥å…·ä¼šè‡ªåŠ¨åŠ å…¥åˆ° All ç»„ä¸­ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/5.gif" srcset="/img/loading.gif"></li>
<li>åˆ é™¤å½“å‰è¡Œçš„å·¥å…·<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œé€‰ä¸­éœ€è¦ç§»é™¤çš„å·¥å…·ï¼Œç‚¹å‡»å›¾ç¤ºâ€œåˆ é™¤â€æŒ‰é’®ï¼Œå¯ä»¥åˆ é™¤é€‰ä¸­è¡Œçš„å·¥å…·ã€‚<br>åˆ é™¤å·¥å…·ä¼šæŠŠå·¥å…·ä»æ‰€æœ‰ç»„ä¸­ç§»é™¤ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/6.gif" srcset="/img/loading.gif"></li>
<li>ä¸Šç§»å½“å‰è¡Œ<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œé€‰æ‹©éœ€è¦ä¸Šç§»çš„å·¥å…·è¡Œï¼Œç‚¹å‡»å›¾ç¤ºâ€œä¸Šç§»â€æŒ‰é’®ï¼Œå¯ä»¥æŠŠé€‰ä¸­å·¥å…·ä¸Šç§»ä¸€ä½ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/7.gif" srcset="/img/loading.gif"></li>
<li>ä¸‹ç§»å½“å‰è¡Œ<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œé€‰æ‹©éœ€è¦ä¸‹ç§»çš„å·¥å…·è¡Œï¼Œç‚¹å‡»å›¾ç¤ºâ€œä¸‹ç§»â€æŒ‰é’®ï¼Œå¯ä»¥æŠŠé€‰ä¸­å·¥å…·ä¸‹ç§»ä¸€ä½ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/8.gif" srcset="/img/loading.gif"></li>
<li>æ‹–æ‹½ç§»åŠ¨è¡Œ<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œé¼ æ ‡å·¦é”®æŒ‰ä½éœ€è¦æ‹–æ‹½ç§»åŠ¨çš„å·¥å…·è¡Œï¼ŒæŒ‰ä½æ‹–åŠ¨é¼ æ ‡åˆ°éœ€è¦æ’å…¥çš„è¡Œä½ç½®åæ¾å¼€é¼ æ ‡å·¦é”®ï¼Œå¯ä»¥æŠŠå·¥å…·ç§»åŠ¨åˆ°æŒ‡å®šè¡Œä½ç½®ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/13.gif" srcset="/img/loading.gif"></li>
<li>ç¼–è¾‘å·¥å…·å†…å®¹<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œé¼ æ ‡å·¦é”®åŒå‡»é€‰ä¸­éœ€è¦ç¼–è¾‘çš„å†…å®¹ï¼Œå¯ä»¥ç¼–è¾‘å½“å‰å·¥å…·ã€‚å…¶ä¸­ ä½¿ç”¨æ¬¡æ•°ã€ tid å’Œ tdatetime ä¸ºä¸å¯ç¼–è¾‘åˆ—ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/21.gif" srcset="/img/loading.gif"></li>
</ol>
<h3 id="è¿è¡Œå·¥å…·å’Œæ‰“å¼€å·¥å…·å¸®åŠ©"><a href="#è¿è¡Œå·¥å…·å’Œæ‰“å¼€å·¥å…·å¸®åŠ©" class="headerlink" title="è¿è¡Œå·¥å…·å’Œæ‰“å¼€å·¥å…·å¸®åŠ©"></a>è¿è¡Œå·¥å…·å’Œæ‰“å¼€å·¥å…·å¸®åŠ©</h3><ol>
<li>è¿è¡Œå·¥å…·<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œå³é”®ç‚¹å‡»é€‰ä¸­å·¥å…·ï¼Œåœ¨å¼¹å‡ºèœå•ä¸­é€‰æ‹©â€œè¿è¡Œå·¥å…·â€ï¼Œå³å¯è¿è¡Œé€‰ä¸­å·¥å…·ã€‚  </li>
<li>æ‰“å¼€å¸®åŠ©<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œå³é”®ç‚¹å‡»é€‰ä¸­å·¥å…·ï¼Œåœ¨å¼¹å‡ºèœå•ä¸­é€‰æ‹©â€œæ‰“å¼€å¸®åŠ©â€ï¼Œå³å¯æ‰“å¼€é€‰ä¸­å·¥å…·çš„å¸®åŠ©æ–‡æ¡£ã€‚  </li>
</ol>
<h3 id="ä¿®æ”¹å·¥å…·çš„åˆ†ç»„"><a href="#ä¿®æ”¹å·¥å…·çš„åˆ†ç»„" class="headerlink" title="ä¿®æ”¹å·¥å…·çš„åˆ†ç»„"></a>ä¿®æ”¹å·¥å…·çš„åˆ†ç»„</h3><ol>
<li>æ·»åŠ åˆ°ç»„<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œå³é”®ç‚¹å‡»é€‰ä¸­å·¥å…·ï¼Œåœ¨å¼¹å‡ºèœå•ä¸­é€‰æ‹©â€œæ·»åŠ åˆ°ç»„â€ï¼Œå¼¹å‡ºåˆ—è¡¨ä¼šæ˜¾ç¤ºé™¤äº†å½“å‰ç»„ã€ All ç»„ä»¥åŠ Unsorted ç»„å¤–çš„å…¶ä»–ç»„ï¼Œé€‰æ‹©éœ€è¦æ·»åŠ çš„ç»„ï¼Œå¯ä»¥æŠŠé€‰ä¸­å·¥å…·æ·»åŠ åˆ°é€‰æ‹©çš„ç»„å†…ã€‚<br>â€œæ·»åŠ åˆ°ç»„â€åŠŸèƒ½ä¸ä¼šæŠŠå·¥å…·ä»åŸæ¥çš„ç»„ä¸­ç§»é™¤ï¼Œè€Œæ˜¯ç›´æ¥åœ¨éœ€è¦æ·»åŠ çš„ç»„ä¸­æ·»åŠ è¯¥å·¥å…·ã€‚<br>å‡å¦‚é€‰ä¸­å·¥å…·å·²ç»å­˜åœ¨äºéœ€è¦æ·»åŠ çš„ç»„ï¼Œåˆ™ä¼šè·³è¿‡æ·»åŠ æ“ä½œã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/18.gif" srcset="/img/loading.gif"></li>
<li>ç§»åŠ¨åˆ°ç»„<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œå³é”®ç‚¹å‡»é€‰ä¸­å·¥å…·ï¼Œåœ¨å¼¹å‡ºèœå•ä¸­é€‰æ‹©â€œç§»åŠ¨åˆ°ç»„â€ï¼Œå¼¹å‡ºåˆ—è¡¨ä¼šæ˜¾ç¤ºé™¤äº†å½“å‰ç»„ã€ All ç»„ä»¥åŠ Unsorted ç»„å¤–çš„å…¶ä»–ç»„ï¼Œé€‰æ‹©éœ€è¦ç§»åŠ¨çš„ç»„ï¼Œå¯ä»¥æŠŠé€‰ä¸­å·¥å…·ç§»åŠ¨åˆ°é€‰æ‹©çš„ç»„å†…ã€‚<br>â€œç§»åŠ¨åˆ°ç»„â€åŠŸèƒ½ä¼šæŠŠå·¥å…·ä»åŸæ¥ç»„ä¸­ç§»é™¤ï¼Œå¹¶åœ¨éœ€è¦ç§»åŠ¨çš„ç»„ä¸­æ·»åŠ è¯¥å·¥å…·ã€‚<br>å‡å¦‚é€‰ä¸­å·¥å…·å·²ç»å­˜åœ¨äºéœ€è¦ç§»åŠ¨çš„ç»„ï¼Œåˆ™ä¼šè·³è¿‡æ·»åŠ æ“ä½œï¼Œä½†ä»ä¼šä»åŸæ¥ç»„ä¸­ç§»é™¤ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/19.gif" srcset="/img/loading.gif"></li>
<li>ç§»å‡ºè¯¥ç»„<br>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œå³é”®ç‚¹å‡»é€‰ä¸­å·¥å…·ï¼Œåœ¨å¼¹å‡ºèœå•ä¸­é€‰æ‹©â€œç§»å‡ºè¯¥ç»„â€ï¼Œå¯ä»¥æŠŠå·¥å…·ä»å½“å‰ç»„ä¸­ç§»é™¤ã€‚<br>ä¸â€œåˆ é™¤å·¥å…·â€ä¸åŒçš„æ˜¯ï¼Œâ€œåˆ é™¤å·¥å…·â€ä¼šæŠŠå·¥å…·ä»æ‰€æœ‰ç»„ä¸­åˆ é™¤ï¼Œè€Œâ€œç§»å‡ºè¯¥ç»„â€åªä¼šæŠŠå·¥å…·ä»è¯¥ç»„ä¸­ç§»é™¤ï¼Œè€Œä¸ä¼šå½±å“å·¥å…·åœ¨å…¶ä»–ç»„çš„å­˜åœ¨æƒ…å†µã€‚<br>å‡å¦‚å·¥å…·åœ¨è¯¥ç»„ä¸­ç§»é™¤åä¸å­˜åœ¨äºé™¤äº† All ç»„å¤–çš„ä»»ä½•å…¶ä»–åˆ†ç»„ï¼Œåˆ™å·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ åˆ° Unsorted åˆ†ç»„ä¸­ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/20.gif" srcset="/img/loading.gif"></li>
</ol>
<h3 id="ç¼–è¾‘ç»„"><a href="#ç¼–è¾‘ç»„" class="headerlink" title="ç¼–è¾‘ç»„"></a>ç¼–è¾‘ç»„</h3><p>åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œç‚¹å‡»â€œç¼–è¾‘ç»„â€æŒ‰é’®ï¼Œä¼šå¼¹å‡ºç¼–è¾‘ç»„çª—å£ç•Œé¢ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç•Œé¢ä¸­æŸ¥çœ‹åˆ°å·²ç»åˆ›å»ºçš„ç»„åï¼Œä»¥åŠè¿›è¡Œæ·»åŠ æ–°ç»„ã€åˆ é™¤ç»„å’Œé‡å‘½åç»„æ“ä½œã€‚ç¼–è¾‘ç»„ä¸­çš„ç»„ä¼šåŒæ­¥åˆ°å·¥å…·çš„åˆ†ç»„ä¸­ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/9.gif" srcset="/img/loading.gif">   </p>
<ol>
<li>æ·»åŠ æ–°ç»„<br>åœ¨æ‰“å¼€çš„ç¼–è¾‘ç»„çª—å£ä¸­ï¼Œç‚¹å‡»â€œæ·»åŠ ç»„â€æŒ‰é’®ï¼Œä¼šå¼¹å‡ºéœ€è¦è¾“å…¥æ–°ç»„åçš„çª—å£ï¼Œåœ¨çª—å£ä¸­è¾“å…¥éœ€è¦åˆ›å»ºçš„ç»„ååï¼Œç‚¹å‡»â€œOKâ€æŒ‰é’®ï¼Œå³å¯æŠŠåœ¨ç»„åˆ—è¡¨æœ€ä¸‹æ–¹åˆ›å»ºä¸€ä¸ªæ–°ç»„ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/10.gif" srcset="/img/loading.gif"></li>
<li>åˆ é™¤ç»„<br>åœ¨æ‰“å¼€çš„ç¼–è¾‘ç»„çª—å£ä¸­ï¼Œé€‰æ‹©éœ€è¦åˆ é™¤çš„ç»„ï¼Œç‚¹å‡»â€œåˆ é™¤ç»„â€æŒ‰é’®ï¼Œä¼šå¼¹å‡ºæç¤ºæ¡†ï¼šâ€œç¡®å®šåˆ é™¤ xxx ç»„ï¼Ÿåˆ é™¤åæœªåˆ†ç±»å·¥å…·ä¼šç§»åŠ¨åˆ° Unsorted ç»„â€ã€‚ç‚¹å‡»æç¤ºæ¡†çš„â€œOkâ€æŒ‰é’®ï¼Œå³å¯åˆ é™¤é€‰ä¸­ç»„ã€‚<br>å‡å¦‚é€‰ä¸­ç»„ä¸­å­˜åœ¨å¤šä¸ªå·¥å…·ï¼Œåˆ™ä¼šåˆ¤æ–­æ¯ä¸ªå·¥å…·æ˜¯å¦å­˜åœ¨ä¸åˆ«çš„ç»„ä¸­ï¼Œå¦‚æœå·¥å…·ä¸å­˜åœ¨äºä»»ä½•ç»„ï¼ˆâ€œAllâ€ç»„é™¤å¤–ï¼‰ï¼Œåˆ™ä¼šæŠŠå·¥å…·ç§»åŠ¨åˆ° Unsorted æœªåˆ†ç±»ç»„ä¸­ã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/11.gif" srcset="/img/loading.gif"></li>
<li>é‡å‘½åç»„<br>åœ¨æ‰“å¼€çš„ç¼–è¾‘çª—å£ä¸­ï¼Œé€‰æ‹©éœ€è¦é‡å‘½åçš„ç»„ï¼Œç‚¹å‡»â€œé‡å‘½åç»„â€ï¼Œä¼šå¼¹å‡ºéœ€è¦è¾“å…¥æ–°ç»„åçš„çª—å£ï¼Œåœ¨çª—å£ä¸­è¾“å…¥æ–°ç»„ååï¼Œç‚¹å‡»â€œOkâ€æŒ‰é’®ï¼Œå³å¯æŠŠé€‰ä¸­ç»„é‡å‘½åã€‚<br><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/12.gif" srcset="/img/loading.gif"></li>
</ol>
<hr>
<h1 id="ğŸ-æ•°æ®ç»“æ„"><a href="#ğŸ-æ•°æ®ç»“æ„" class="headerlink" title="ğŸ æ•°æ®ç»“æ„"></a>ğŸ æ•°æ®ç»“æ„</h1><h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h2><p>&emsp;&emsp;æœ¬æ¥ä¸€å¼€å§‹æ˜¯è®¡åˆ’ç”¨ PostgreSQL æ¥å®ç°çš„ï¼Œä½†æ˜¯ç”±äº Maya çš„ PySide2 ä¸­æ²¡æœ‰ PSql çš„é©±åŠ¨ï¼Œæœ¬æ¥ä½¿ç”¨ PSql å·²ç»å¼€å‘ä¸€åŠäº†ï¼Œä¹Ÿæ— å¥ˆè¢«è¿«ä¸­æ­¢ï¼Œè½¬ç”¨ sqlite ã€‚</p>
<p>&emsp;&emsp;è‡³äº Model ï¼Œä¸€å¼€å§‹ä¸æ¸…æ¥š Qt æœ‰ç›´æ¥å¤„ç†æ•°æ®åº“çš„ç±»ï¼Œä½¿ç”¨äº†ä¼ ç»Ÿçš„ QAbstractTableModel ç»“åˆè‡ªå®šä¹‰ Node ç±»å‹èŠ‚ç‚¹å®ç°æ˜¾ç¤ºã€‚è™½ç„¶ä¹Ÿå¯ä»¥æ­£å¸¸æ˜¾ç¤ºæ•°æ®ï¼Œä½†æ˜¯åœ¨å¾—çŸ¥å¯ä»¥ä½¿ç”¨ QSqlTableModel ç›´æ¥æ“ä½œæ•°æ®åº“æ•°æ®åï¼Œå°±èˆå¼ƒäº†ä¼ ç»Ÿæ¨¡å‹ï¼Œæ”¹ç”¨ QSqlTableModel äº†ã€‚</p>
<h3 id="PSQL"><a href="#PSQL" class="headerlink" title="PSQL"></a>PSQL</h3><p>&emsp;&emsp;è™½ç„¶æœ€ç»ˆå¹¶æ²¡æœ‰ä½¿ç”¨ Psql ï¼Œä½†æ˜¯æ¯•ç«ŸæŠ•å…¥äº†ä¸€ç‚¹æ—¶é—´è¿›è¡Œç ”ç©¶ï¼Œæ‰€ä»¥è¿˜æ˜¯è®°å½•ä¸€ä¸‹ Psql ä¸­çš„å¼€å‘ä½¿ç”¨å§ã€‚</p>
<h4 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h4><p>&emsp;&emsp;ä½¿ç”¨ pgAdmin 4 åˆ›å»ºæ•°æ®åº“ã€‚</p>
<h4 id="è·å–æ•°æ®åº“è¿æ¥"><a href="#è·å–æ•°æ®åº“è¿æ¥" class="headerlink" title="è·å–æ•°æ®åº“è¿æ¥"></a>è·å–æ•°æ®åº“è¿æ¥</h4><div class="hljs"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> psycopg2
conn = psycopg2.connect(
                database=<span class="hljs-string">&#x27;database name&#x27;</span>,
                user=<span class="hljs-string">&#x27;user name&#x27;</span>,
                password=<span class="hljs-string">&#x27;database password&#x27;</span>,
                host=<span class="hljs-string">&#x27;your host&#x27;</span>,
                port=<span class="hljs-string">&#x27;your port&#x27;</span>)

TOOL_TABLE = <span class="hljs-string">&#x27;public.tool_manager&#x27;</span></code></pre></div>

<h4 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h4><div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">insert_data</span>(<span class="hljs-params">conn, table, tname, tcommand, tlocation, ttooltip=<span class="hljs-string">&#x27;&#x27;</span>,  tenabled=True, ticon=<span class="hljs-string">&#x27;&#x27;</span>, thelp=<span class="hljs-string">&#x27;&#x27;</span>, tgitlab=<span class="hljs-string">&#x27;&#x27;</span>, tused=<span class="hljs-number">0</span>, tid=<span class="hljs-number">0</span>, tdatetime=<span class="hljs-string">&#x27;&#x27;</span></span>):</span>
    cursor = conn.cursor()
    cursor.execute(<span class="hljs-string">&quot;INSERT INTO &#123;&#125;(tname, ttooltip, tcommand, tenabled, ticon, tlocation, thelp, tgitlab, tused, tid, tdate) \</span>
<span class="hljs-string">        VALUES(&#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, &#123;&#125;, &#123;&#125;, &#x27;&#123;&#125;&#x27;)&quot;</span>.format(
            table, tname, ttooltip.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>), tcommand, tenabled, ticon, tlocation, thelp, tgitlab, tused, tid, tdatetime
        ))

insert_data(conn, <span class="hljs-string">&#x27;public.group_&#123;&#125;&#x27;</span>.format(tgroups.lower().replace(<span class="hljs-string">&#x27; &#x27;</span>,<span class="hljs-string">&#x27;_&#x27;</span>)), tname=tname, tcommand=tcommand, tlocation=tlocation, ttooltip=ttooltip, ticon=ticon, tenabled=tenabled, thelp=thelp, tused=tused, tid=tid, tdatetime=tdatetime)</code></pre></div>

<h4 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h4><div class="hljs"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">delete_data</span>(<span class="hljs-params">conn, table, condition_key, condition_value</span>):</span>
    cursor = conn.cursor()
    cursor.execute(<span class="hljs-string">&quot;DELETE FROM &#123;&#125; \</span>
<span class="hljs-string">        WHERE &#123;&#125;=&#x27;&#123;&#125;&#x27;&quot;</span>.format(table, condition_key, condition_value))

delete_data(conn, TOOL_TABLE, <span class="hljs-string">&#x27;tname&#x27;</span>, <span class="hljs-string">&#x27;first_tool&#x27;</span>)</code></pre></div>

<h4 id="æ¸…ç©ºè¡¨æ•°æ®"><a href="#æ¸…ç©ºè¡¨æ•°æ®" class="headerlink" title="æ¸…ç©ºè¡¨æ•°æ®"></a>æ¸…ç©ºè¡¨æ•°æ®</h4><p>&emsp;&emsp;truncate æ–¹æ³•åœ¨ sqlite æ˜¯æ²¡æœ‰çš„ã€‚</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">truncate_table</span>(<span class="hljs-params">conn, table</span>):</span>
    cursor = conn.cursor()
    cursor.execute(<span class="hljs-string">&quot;truncate &#123;&#125;&quot;</span>.format(table))

truncate_table(TOOL_TABLE)</code></pre></div>

<h4 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h4><div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">query_data</span>(<span class="hljs-params">conn, table, key, condition=<span class="hljs-string">&#x27;&#x27;</span></span>):</span>
    cursor = conn.cursor()
    <span class="hljs-keyword">if</span> condition:
        cursor.execute(<span class="hljs-string">&quot;SELECT &#123;&#125; from &#123;&#125; where &#123;&#125;&quot;</span>.format(key, table, condition))
    <span class="hljs-keyword">else</span>:
        cursor.execute(<span class="hljs-string">&quot;SELECT &#123;&#125; from &#123;&#125;&quot;</span>.format(key, table))
    data = cursor.fetchall()
    <span class="hljs-keyword">return</span> data

query_data(conn, TOOL_TABLE, <span class="hljs-string">&#x27;tname&#x27;</span>)</code></pre></div>

<h4 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h4><div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update_data</span>(<span class="hljs-params">conn, table, key, value, condition</span>):</span>
    cursor = conn.cursor()
    <span class="hljs-keyword">try</span>:
        cursor.execute(<span class="hljs-string">&quot;UPDATE &#123;&#125; SET &#123;&#125;=&#x27;&#123;&#125;&#x27; WHERE &#123;&#125;;&quot;</span>.format(table, key, value.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>), condition))
    <span class="hljs-keyword">except</span>:
        cursor.execute(<span class="hljs-string">&quot;UPDATE &#123;&#125; SET &#123;&#125;=&#123;&#125; WHERE &#123;&#125;;&quot;</span>.format(table, key, value, condition))

update_data(conn, TOOL_TABLE, <span class="hljs-string">&#x27;thelp&#x27;</span>, thelp, <span class="hljs-string">&quot;tname=&#x27;&#123;&#125;&#x27;&quot;</span>.format(tname))</code></pre></div>

<hr>
<h3 id="SQlite"><a href="#SQlite" class="headerlink" title="SQlite"></a>SQlite</h3><p>&emsp;&emsp;SQLite æ˜¯ä¸€ä¸ªè½¯ä»¶åº“ï¼Œå®ç°äº†è‡ªç»™è‡ªè¶³çš„ã€æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ã€äº‹åŠ¡æ€§çš„ SQL æ•°æ®åº“å¼•æ“ã€‚SQLite æ˜¯åœ¨ä¸–ç•Œä¸Šæœ€å¹¿æ³›éƒ¨ç½²çš„ SQL æ•°æ®åº“å¼•æ“ã€‚SQLite æºä»£ç ä¸å—ç‰ˆæƒé™åˆ¶ã€‚</p>
<h4 id="åˆ›å»ºæ•°æ®åº“-1"><a href="#åˆ›å»ºæ•°æ®åº“-1" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h4><p>&emsp;&emsp;SQLite å¯ä»¥æŒ‡å®šæ•°æ®åº“ä½ç½®ï¼Œå‡å¦‚ä½ç½®ä¸å­˜åœ¨åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ã€‚</p>
<div class="hljs"><pre><code class="hljs Python">TOOLS_DB = <span class="hljs-string">&#x27;tools.db&#x27;</span>
conn = sqlite3.connect(TOOLS_DB)
cursor = conn.cursor()</code></pre></div>

<h4 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h4><p>&emsp;&emsp;SQLite æ²¡æœ‰å•ç‹¬çš„ Boolean å­˜å‚¨ç±»ã€‚ç›¸åï¼Œå¸ƒå°”å€¼è¢«å­˜å‚¨ä¸ºæ•´æ•° 0ï¼ˆfalseï¼‰å’Œ 1ï¼ˆtrueï¼‰ã€‚</p>
<p>&emsp;&emsp;SQLite æ²¡æœ‰ä¸€ä¸ªå•ç‹¬çš„ç”¨äºå­˜å‚¨æ—¥æœŸå’Œ/æˆ–æ—¶é—´çš„å­˜å‚¨ç±»ï¼Œä½† SQLite èƒ½å¤ŸæŠŠæ—¥æœŸå’Œæ—¶é—´å­˜å‚¨ä¸º TEXTã€REAL æˆ– INTEGER å€¼ã€‚</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_table</span>(<span class="hljs-params">table_name</span>):</span>
    cursor.execute(<span class="hljs-string">&#x27;&#x27;&#x27;select name from sqlite_master where type=&#x27;table&#x27; order by name;&#x27;&#x27;&#x27;</span>)
    table_tuples = cursor.fetchall()
    <span class="hljs-keyword">if</span> tuple([table_name]) <span class="hljs-keyword">in</span> table_tuples:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    cursor.execute(<span class="hljs-string">&#x27;&#x27;&#x27;create table &#123;&#125;(</span>
<span class="hljs-string">        tname       text,</span>
<span class="hljs-string">        ttooltip    text,</span>
<span class="hljs-string">        tenabled    boolean,</span>
<span class="hljs-string">        tsetup      boolean,</span>
<span class="hljs-string">        tcommand    text,</span>
<span class="hljs-string">        ticon       text,</span>
<span class="hljs-string">        tlocation   text,</span>
<span class="hljs-string">        thelp       text,</span>
<span class="hljs-string">        tgitlab     text,</span>
<span class="hljs-string">        tused       integer,</span>
<span class="hljs-string">        tid         integer,</span>
<span class="hljs-string">        tdate       text</span>
<span class="hljs-string">        );&#x27;&#x27;&#x27;</span>.format(table_name))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

create_table(<span class="hljs-string">&#x27;group_all&#x27;</span>)</code></pre></div>

<h4 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="headerlink" title="åˆ é™¤è¡¨"></a>åˆ é™¤è¡¨</h4><p>&emsp;&emsp;SQLite çš„ DROP TABLE è¯­å¥ç”¨æ¥åˆ é™¤è¡¨å®šä¹‰åŠå…¶æ‰€æœ‰ç›¸å…³æ•°æ®ã€ç´¢å¼•ã€è§¦å‘å™¨ã€çº¦æŸå’Œè¯¥è¡¨çš„æƒé™è§„èŒƒã€‚</p>
<p>&emsp;&emsp;ä½¿ç”¨æ­¤å‘½ä»¤æ—¶è¦ç‰¹åˆ«æ³¨æ„ï¼Œå› ä¸ºä¸€æ—¦ä¸€ä¸ªè¡¨è¢«åˆ é™¤ï¼Œè¡¨ä¸­æ‰€æœ‰ä¿¡æ¯ä¹Ÿå°†æ°¸è¿œä¸¢å¤±ã€‚</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">drop_table</span>(<span class="hljs-params">table_name</span>):</span>
    cursor.execute(<span class="hljs-string">&#x27;&#x27;&#x27;DROP TABLE &#123;&#125;;&#x27;&#x27;&#x27;</span>.format(table_name))

drop_table(<span class="hljs-string">&#x27;group_all&#x27;</span>)</code></pre></div>

<h4 id="é‡å‘½åè¡¨å"><a href="#é‡å‘½åè¡¨å" class="headerlink" title="é‡å‘½åè¡¨å"></a>é‡å‘½åè¡¨å</h4><div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rename_table</span>(<span class="hljs-params">old_table, new_table</span>):</span>
    cursor.execute(<span class="hljs-string">&#x27;&#x27;&#x27;select name from sqlite_master where type=&#x27;table&#x27; order by name;&#x27;&#x27;&#x27;</span>)
    table_tuples = cursor.fetchall()
    <span class="hljs-keyword">if</span> tuple([new_table]) <span class="hljs-keyword">in</span> table_tuples:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    cursor.execute(<span class="hljs-string">&#x27;&#x27;&#x27;ALTER TABLE &#123;&#125; RENAME TO &#123;&#125;;&#x27;&#x27;&#x27;</span>.format(old_table, new_table))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

rename_table(<span class="hljs-string">&#x27;old&#x27;</span>, <span class="hljs-string">&#x27;new&#x27;</span>)</code></pre></div>

<h4 id="æ¸…ç©ºè¡¨"><a href="#æ¸…ç©ºè¡¨" class="headerlink" title="æ¸…ç©ºè¡¨"></a>æ¸…ç©ºè¡¨</h4><p>&emsp;&emsp;åœ¨ SQLite ä¸­ï¼Œå¹¶æ²¡æœ‰ TRUNCATE TABLE å‘½ä»¤ï¼Œä½†å¯ä»¥ä½¿ç”¨ SQLite çš„ DELETE å‘½ä»¤ä»å·²æœ‰çš„è¡¨ä¸­åˆ é™¤å…¨éƒ¨çš„æ•°æ®ã€‚</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">truncate_table</span>(<span class="hljs-params">table</span>):</span>
    cursor.execute(<span class="hljs-string">&#x27;&#x27;&#x27;delete from &#123;&#125;;&#x27;&#x27;&#x27;</span>.format(table))

truncate_table(<span class="hljs-string">&#x27;group_all&#x27;</span>)</code></pre></div>

<h4 id="æ’å…¥æ•°æ®-1"><a href="#æ’å…¥æ•°æ®-1" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h4><div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">insert_record</span>(<span class="hljs-params">table, tname=<span class="hljs-string">&#x27;NewTool&#x27;</span>, tcommand=<span class="hljs-string">&#x27;&lt;Command&gt;&#x27;</span>, tlocation=<span class="hljs-string">&#x27;&lt;Location&gt;&#x27;</span>, ttooltip=<span class="hljs-string">&#x27;&lt;ToolTip&gt;&#x27;</span>,  tenabled=True, ticon=<span class="hljs-string">&#x27;&lt;Icon&gt;&#x27;</span>, thelp=<span class="hljs-string">&#x27;&lt;Help&gt;&#x27;</span>, tgitlab=<span class="hljs-string">&#x27;&lt;Gitlab&gt;&#x27;</span>, tused=<span class="hljs-number">0</span>, tid=<span class="hljs-number">0</span>, tdate=<span class="hljs-string">&#x27;&#x27;</span>, tsetup=False</span>):</span>
    cursor.execute(<span class="hljs-string">&#x27;&#x27;&#x27;insert into &#123;&#125;(tname, ttooltip, tenabled, tsetup, tcommand, ticon, tlocation, thelp, tgitlab, tused, tid, tdate)</span>
<span class="hljs-string">        VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?</span>
<span class="hljs-string">        )&#x27;&#x27;&#x27;</span>.format(table), (tname, ttooltip, tenabled, tsetup, tcommand, ticon, tlocation, thelp, tgitlab, tused, tid, tdate))

insert_record(<span class="hljs-string">&#x27;group_&#123;&#125;&#x27;</span>.format(tgroups.lower().replace(<span class="hljs-string">&#x27; &#x27;</span>,<span class="hljs-string">&#x27;_&#x27;</span>)), tname=tname, tcommand=tcommand, tlocation=tlocation, ttooltip=ttooltip, ticon=ticon, tenabled=tenabled, thelp=thelp, tused=tused, tid=tid, tdate=tdatetime, tsetup=tsetup)</code></pre></div>

<hr>
<h2 id="QSqlTableModel"><a href="#QSqlTableModel" class="headerlink" title="QSqlTableModel"></a>QSqlTableModel</h2><p>&emsp;&emsp;QSqlTableModel å¯ä»¥ä½œä¸º QTableView çš„æ•°æ®æºã€‚</p>
<h3 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h3><div class="hljs"><pre><code class="hljs Python">TOOLS_DB = <span class="hljs-string">&#x27;tools.db&#x27;</span>
<span class="hljs-meta">@staticmethod</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sql_db</span>():</span>
    <span class="hljs-keyword">if</span> QSqlDatabase.contains(<span class="hljs-string">&quot;qt_sql_default_connection&quot;</span>):
        db = QSqlDatabase.database(<span class="hljs-string">&quot;qt_sql_default_connection&quot;</span>)
    <span class="hljs-keyword">else</span>:
        db = QSqlDatabase.addDatabase(<span class="hljs-string">&quot;QSQLITE&quot;</span>)
        
    db.setDatabaseName(TOOLS_DB)

    <span class="hljs-keyword">if</span> db.open():
        <span class="hljs-keyword">return</span> db
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> QSqlDatabase()</code></pre></div>

<h3 id="è®¾ç½®ç¼–è¾‘ç­–ç•¥"><a href="#è®¾ç½®ç¼–è¾‘ç­–ç•¥" class="headerlink" title="è®¾ç½®ç¼–è¾‘ç­–ç•¥"></a>è®¾ç½®ç¼–è¾‘ç­–ç•¥</h3><p>QSqlTableModel.setEditStrategy(strategy)</p>
<p>å‚æ•°ä¸ºæšä¸¾ç±»å‹ï¼š</p>
<ul>
<li>OnFieldChange å­—æ®µå€¼å˜åŒ–æ—¶ç«‹å³æ›´æ–°åˆ°æ•°æ®åº“</li>
<li>OnRowChange å½“å‰è¡Œå˜åŒ–æ—¶æ›´æ–°åˆ°æ•°æ®åº“</li>
<li>OnManualSubmitÂ  æ‰€æœ‰ä¿®æ”¹æš‚æ—¶ç¼“å­˜ï¼Œæ‰‹åŠ¨è°ƒç”¨submitAllä¿å­˜</li>
</ul>
<div class="hljs"><pre><code class="hljs Python">self.setEditStrategy(QSqlTableModel.OnManualSubmit)</code></pre></div>

<hr>
<h1 id="â­-å…·ä½“åŠŸèƒ½è¯¦è§£"><a href="#â­-å…·ä½“åŠŸèƒ½è¯¦è§£" class="headerlink" title="â­ å…·ä½“åŠŸèƒ½è¯¦è§£"></a>â­ å…·ä½“åŠŸèƒ½è¯¦è§£</h1><h2 id="MVC-æ¡†æ¶-æ˜¾ç¤ºå·¥å…·æ•°æ®"><a href="#MVC-æ¡†æ¶-æ˜¾ç¤ºå·¥å…·æ•°æ®" class="headerlink" title="MVC æ¡†æ¶ æ˜¾ç¤ºå·¥å…·æ•°æ®"></a>MVC æ¡†æ¶ æ˜¾ç¤ºå·¥å…·æ•°æ®</h2><p>&emsp;&emsp;ç»å…¸ MVC æ¨¡å¼ä¸­ï¼ŒM æ˜¯æŒ‡ä¸šåŠ¡æ¨¡å‹ï¼ŒV æ˜¯æŒ‡ç”¨æˆ·ç•Œé¢ï¼ŒC åˆ™æ˜¯æ§åˆ¶å™¨ï¼Œä½¿ç”¨ MVC çš„ç›®çš„æ˜¯å°† M å’Œ V çš„å®ç°ä»£ç åˆ†ç¦»ï¼Œä»è€Œä½¿åŒä¸€ä¸ªç¨‹åºå¯ä»¥ä½¿ç”¨ä¸åŒçš„è¡¨ç°å½¢å¼ã€‚å…¶ä¸­ï¼ŒView çš„å®šä¹‰æ¯”è¾ƒæ¸…æ™°ï¼Œå°±æ˜¯ç”¨æˆ·ç•Œé¢ã€‚</p>
<p>&emsp;&emsp;åœ¨ Qt ä¸­çš„ MVC å¹¶ä¸å«MVCï¼Œè€Œæ˜¯å«â€œMVDâ€ï¼ŒQtä¸­æ²¡æœ‰ Controller çš„è¯´æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨äº†å¦å¤–ä¸€ç§æŠ½è±¡: Delegate (å§”æ‰˜) ï¼Œå…¶è¡Œä¸ºå’Œä¼ ç»Ÿçš„ MVC æ˜¯ç›¸åŒçš„ã€‚</p>
<p>&emsp;&emsp;åœ¨æœ¬å·¥å…·ä¸­ï¼ŒView ä½¿ç”¨äº† QListViewï¼ˆç”¨æˆ·ç•Œé¢ï¼‰å’Œ QTableViewï¼ˆç®¡ç†å‘˜ç•Œé¢ï¼‰ï¼ŒModel ä½¿ç”¨äº† QSqlTableModelï¼ŒDelegate ä½¿ç”¨äº† QStyledItemDelegateï¼ˆcombobox æ˜¾ç¤º dataï¼‰ã€‚</p>
<h3 id="å·¥å…·è§†å›¾-ToolView"><a href="#å·¥å…·è§†å›¾-ToolView" class="headerlink" title="å·¥å…·è§†å›¾ ToolView"></a>å·¥å…·è§†å›¾ ToolView</h3><p>&emsp;&emsp;ç»§æ‰¿æ¶æ„ï¼š</p>
<p><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/ToolView%E7%BB%A7%E6%89%BF%E5%9B%BE.jpg" srcset="/img/loading.gif"></p>
<h3 id="æ•°æ®æ¨¡å‹-sqlTableModel"><a href="#æ•°æ®æ¨¡å‹-sqlTableModel" class="headerlink" title="æ•°æ®æ¨¡å‹ sqlTableModel"></a>æ•°æ®æ¨¡å‹ sqlTableModel</h3><p>&emsp;&emsp;æ¨¡å‹æ–¹æ³•ï¼š</p>
<p><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/sqlTableModel%E7%BB%A7%E6%89%BF%E5%9B%BE.jpg" srcset="/img/loading.gif"></p>
<h3 id="å§”æ‰˜ä»£ç†-ComboBoxDelegate"><a href="#å§”æ‰˜ä»£ç†-ComboBoxDelegate" class="headerlink" title="å§”æ‰˜ä»£ç† ComboBoxDelegate"></a>å§”æ‰˜ä»£ç† ComboBoxDelegate</h3><p>&emsp;&emsp;å¯¹ tenabledã€tsetup è¿™ç±»å¸ƒå°”å€¼é¡¹è®¾ç½®ä»£ç†ï¼Œä½¿å¾—ç¼–è¾‘æ—¶æ˜¾ç¤ºè‡ªå®šä¹‰ä¸‹æ‹‰æ¡†ä»¥é€‰æ‹©â€œYesâ€æˆ–è€…â€œNoâ€ã€‚</p>
<p><img src="/2020/10/09/qt/%E5%B7%A5%E5%85%B7%E6%9E%B6%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/ComboBoxDelegate%E7%BB%A7%E6%89%BF%E5%9B%BE.jpg" srcset="/img/loading.gif"></p>
<h3 id="ä¸ºè§†å›¾è®¾ç½®æ¨¡å‹å’Œä»£ç†"><a href="#ä¸ºè§†å›¾è®¾ç½®æ¨¡å‹å’Œä»£ç†" class="headerlink" title="ä¸ºè§†å›¾è®¾ç½®æ¨¡å‹å’Œä»£ç†"></a>ä¸ºè§†å›¾è®¾ç½®æ¨¡å‹å’Œä»£ç†</h3><p>ui_main_sql.py</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-comment"># init list view</span>
self.UserView = self.icon_list_view
self.tool_view = self.UserView
<span class="hljs-comment"># init model</span>
self.tool_model = _sql_table_model.sqlTableModel(self.tool_view)
<span class="hljs-comment"># set list view model</span>
self.icon_list_view.setModel(self.tool_model)
self.list_list_view.setModel(self.tool_model)

<span class="hljs-comment"># --- change to AdminMode --- </span>
<span class="hljs-comment"># init table view</span>
self.AdminView = _table_view.TableView(self)
<span class="hljs-comment"># init combobox delegate</span>
combo_model = QStandardItemModel(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, self.AdminView)
combo_model.setData(combo_model.index(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, QModelIndex()), <span class="hljs-string">&quot;Yes&quot;</span>)
combo_model.setData(combo_model.index(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, QModelIndex()), <span class="hljs-string">&quot;No&quot;</span>)
<span class="hljs-comment"># set table view delegate</span>
self.AdminView.setItemDelegateForColumn(self.tool_model._column_key[<span class="hljs-string">&#x27;tenabled&#x27;</span>], _combobox_delegate.ComboBoxDelegate(combo_model, self.AdminView))
self.AdminView.setItemDelegateForColumn(self.tool_model._column_key[<span class="hljs-string">&#x27;tsetup&#x27;</span>], _combobox_delegate.ComboBoxDelegate(combo_model, self.AdminView))
<span class="hljs-comment"># set table view model</span>
self.AdminView.setModel(self.tool_model)</code></pre></div>
<hr>
<h2 id="åˆ‡æ¢ç»„æ—¶æ›´æ–°å·¥å…·è§†å›¾"><a href="#åˆ‡æ¢ç»„æ—¶æ›´æ–°å·¥å…·è§†å›¾" class="headerlink" title="åˆ‡æ¢ç»„æ—¶æ›´æ–°å·¥å…·è§†å›¾"></a>åˆ‡æ¢ç»„æ—¶æ›´æ–°å·¥å…·è§†å›¾</h2><p>&emsp;&emsp;å½“åˆ‡æ¢ç»„æ—¶ï¼ŒsqkTableModelé‡æ–°è®¾ç½®æ•°æ®è¡¨ã€‚</p>
<p>ui_main_sql.py</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToolWin</span>(<span class="hljs-params">QMainWindow</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, parent=None</span>):</span>
        <span class="hljs-comment"># init group combobox</span>
        self.group_combobox = _combo_box.ComboBox(self.group_list)
        <span class="hljs-comment"># parse group combobox to model</span>
        self.tool_model.set_group_combobox(self.group_combobox)
        <span class="hljs-comment"># set group combobox signal</span>
        self.group_combobox.currentTextChanged.connect(self.change_group)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change_group</span>(<span class="hljs-params">self, cur_group</span>):</span>
        group_table = _table_view.TableView.group_to_table(cur_group)
        self.tool_model.change_db_table(group_table)</code></pre></div>

<p>sql_table_model.py</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">sqlTableModel</span>(<span class="hljs-params">QSqlTableModel</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change_db_table</span>(<span class="hljs-params">self, table_name</span>):</span>
        <span class="hljs-string">&quot;&quot;&quot;æ›´å˜å½“å‰æ•°æ®åº“è¡¨ä¸ºæŒ‡å®šæ–°è¡¨å</span>
<span class="hljs-string"></span>
<span class="hljs-string">        Args:</span>
<span class="hljs-string">            table_name (str): æ•°æ®åº“è¡¨å</span>
<span class="hljs-string">        &quot;&quot;&quot;</span>
        self.setTable(table_name)
        <span class="hljs-comment"># é‡æ–°ç­›é€‰ç¬¦åˆæœç´¢æ¡ä»¶çš„å·¥å…·</span>
        self.setFilter(<span class="hljs-string">&quot;lower(tname) like &#x27;%&#123;&#125;%&#x27; or lower(ttooltip) like &#x27;%&#123;&#125;%&#x27;&quot;</span>.format(self._filter_text.lower(), self._filter_text.lower()))
        self.setSort(self._sort_key, Qt.AscendingOrder)
        self.select()

        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;tname&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;å·¥å…·åç§°&quot;</span>)
        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;ttooltip&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;è¯´æ˜&quot;</span>)
        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;tcommand&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;è°ƒç”¨å‘½ä»¤&quot;</span>)
        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;tenabled&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;å¯è§æ€§&quot;</span>)
        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;tsetup&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;å¯åŠ¨æ—¶è°ƒç”¨&quot;</span>)
        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;ticon&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;å›¾æ ‡&quot;</span>)
        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;tlocation&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;è°ƒç”¨ä½ç½®&quot;</span>)
        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;thelp&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;å¸®åŠ©æ–‡æ¡£&quot;</span>)
        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;tgitlab&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;Gitlabä»“åº“&quot;</span>)
        self.setHeaderData(self._column_key[<span class="hljs-string">&#x27;tused&#x27;</span>], Qt.Horizontal, <span class="hljs-string">u&quot;ä½¿ç”¨æ¬¡æ•°&quot;</span>)

        <span class="hljs-comment"># è®¾ç½®ç»„ä¸‹æ‹‰æ¡†å½“å‰å€¼ä¸ºæ–°è¡¨åå¯¹åº”çš„ç»„å</span>
        <span class="hljs-keyword">if</span> self._group_combobox:
            cur_table_group = self._parent_view.table_to_group(table_name)
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> cur_table_group == self._group_combobox.currentText():
                self._group_combobox.setCurrentText(cur_table_group)

        <span class="hljs-comment"># è¡¨æ ¼æ ¹æ®è®°å½•çš„tdateé€‰æ‹©å·¥å…·</span>
        <span class="hljs-keyword">if</span> self._parent_view.inherits(<span class="hljs-string">&#x27;QTableView&#x27;</span>):
            self._parent_view.setColumnWidth(self._column_key[<span class="hljs-string">&#x27;tname&#x27;</span>], <span class="hljs-number">150</span>)
            self.set_select_row()</code></pre></div>

<hr>
<h2 id="æ— è¾¹æ¡†çª—å£æ·»åŠ é˜´å½±"><a href="#æ— è¾¹æ¡†çª—å£æ·»åŠ é˜´å½±" class="headerlink" title="æ— è¾¹æ¡†çª—å£æ·»åŠ é˜´å½±"></a>æ— è¾¹æ¡†çª—å£æ·»åŠ é˜´å½±</h2><p>&emsp;&emsp;æŠŠé˜´å½±çª—å£ ShadowWidget è®¾ç½®ä¸ºæ˜¾ç¤ºä¸»çª—å£çš„çˆ¶çª—ä½“ã€‚</p>
<p>ui_main_sql.py</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShadowWidget</span>(<span class="hljs-params">QWidget</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, main_win, parent=None</span>):</span>
        super(ShadowWidget, self).__init__(parent)

        self.setWindowFlags(Qt.FramelessWindowHint | Qt.Windo
        self.setAttribute(Qt.WA_TranslucentBackground)

        self.main_widget = main_win
        self.main_widget.setParent(self)
        self.main_layout = QVBoxLayout(self)
        self.main_layout.addWidget(self.main_widget)
        self.main_layout.setContentsMargins(<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>)

        wndShadow = QGraphicsDropShadowEffect(self)
        wndShadow.setBlurRadius(<span class="hljs-number">20</span>)
        wndShadow.setColor(Qt.gray)
        wndShadow.setOffset(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)
        self.main_widget.setGraphicsEffect(wndShadow)</code></pre></div>
<hr>
<h2 id="æ— è¾¹æ¡†çª—å£æ‹–æ‹½åŠŸèƒ½"><a href="#æ— è¾¹æ¡†çª—å£æ‹–æ‹½åŠŸèƒ½" class="headerlink" title="æ— è¾¹æ¡†çª—å£æ‹–æ‹½åŠŸèƒ½"></a>æ— è¾¹æ¡†çª—å£æ‹–æ‹½åŠŸèƒ½</h2><p>&emsp;&emsp;é€šè¿‡é‡å†™é¼ æ ‡ç‚¹å‡»ã€é‡Šæ”¾å’Œç§»åŠ¨äº‹ä»¶å®ç°çª—å£æ‹–æ‹½åŠŸèƒ½ã€‚</p>
<p>&emsp;&emsp;ç”¨ ismoving å±æ€§è®°å½•çª—å£ç§»åŠ¨çŠ¶æ€ã€‚</p>
<p>ui_main_sql.py</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShadowWidget</span>(<span class="hljs-params">QWidget</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, main_win, parent=None</span>):</span>
        self.ismoving = <span class="hljs-literal">False</span>
        self.main_widget.setMouseTracking(<span class="hljs-literal">True</span>)
        self.setMouseTracking(<span class="hljs-literal">True</span>)
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mouseMoveEvent</span>(<span class="hljs-params">self, event</span>):</span>
        super(ShadowWidget, self).mouseMoveEvent(event)
        <span class="hljs-keyword">if</span> self.ismoving:
            relpos = event.globalPos() - self.start_point
            self.move(self.window_point + relpos)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mousePressEvent</span>(<span class="hljs-params">self, event</span>):</span>
        super(ShadowWidget, self).mousePressEvent(event)
        <span class="hljs-keyword">if</span> event.button() == Qt.LeftButton:
            self.ismoving = <span class="hljs-literal">True</span>
            self.setCursor(Qt.ClosedHandCursor)
            self.start_point = event.globalPos()
            self.window_point = self.frameGeometry().topLeft()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mouseReleaseEvent</span>(<span class="hljs-params">self, event</span>):</span>
        super(ShadowWidget, self).mouseReleaseEvent(event)
        self.ismoving = <span class="hljs-literal">False</span>
        <span class="hljs-keyword">if</span> event.button() == Qt.LeftButton:
            self.setCursor(Qt.ArrowCursor)</code></pre></div>

<hr>
<h2 id="æ— è¾¹æ¡†çª—å£ç¼©æ”¾åŠŸèƒ½"><a href="#æ— è¾¹æ¡†çª—å£ç¼©æ”¾åŠŸèƒ½" class="headerlink" title="æ— è¾¹æ¡†çª—å£ç¼©æ”¾åŠŸèƒ½"></a>æ— è¾¹æ¡†çª—å£ç¼©æ”¾åŠŸèƒ½</h2><p>å±æ€§ï¼š</p>
<ul>
<li>Margins: åˆ¤å®šçª—å£è¾¹ç¼˜è·ç¦»é¼ æ ‡çš„å€¼</li>
<li>current_edit_rect: é¼ æ ‡æ‰€åœ¨ç•Œé¢çš„åŒºåŸŸèŒƒå›´</li>
<li>on_left_btnï¼šæ˜¯å¦æŒ‰ä¸‹å·¦é”®</li>
</ul>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li>judgeReigon(pos): åˆ¤æ–­é¼ æ ‡åœ¨çª—å£è¾¹ç¼˜çš„å“ªä¸€éƒ¨åˆ†åŒºåŸŸ</li>
<li>resizeWin(mgPos): é¼ æ ‡åœ¨å¯ä»¥ç¼©æ”¾çš„åŒºåŸŸèŒƒå›´å¹¶å·¦é”®ç‚¹å‡»å’Œæ‹–æ‹½ï¼Œåˆ™è¿›è¡Œç¼©æ”¾</li>
</ul>
<p>ui_main_sql.py</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShadowWidget</span>(<span class="hljs-params">QWidget</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, main_win, parent=None</span>):</span>
        self.Margins = <span class="hljs-number">10</span>
        self.current_edit_rect = <span class="hljs-literal">None</span>
        self.on_left_btn = <span class="hljs-literal">False</span>
        self.main_widget.setMouseTracking(<span class="hljs-literal">True</span>)
        self.setMouseTracking(<span class="hljs-literal">True</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mouseMoveEvent</span>(<span class="hljs-params">self, event</span>):</span>
        super(ShadowWidget, self).mouseMoveEvent(event)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.on_left_btn:
            self.judgeReigon(self.mapToParent(event.pos()))
        <span class="hljs-keyword">elif</span> self.cursor() != Qt.ArrowCursor:
            self.resizeWin(event.globalPos())

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mousePressEvent</span>(<span class="hljs-params">self, event</span>):</span>
        super(ShadowWidget, self).mousePressEvent(event)
        <span class="hljs-keyword">if</span> event.button() == Qt.LeftButton:
            self.on_left_btn = <span class="hljs-literal">True</span>
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mouseReleaseEvent</span>(<span class="hljs-params">self, event</span>):</span>
        super(ShadowWidget, self).mouseReleaseEvent(event)
        <span class="hljs-keyword">if</span> event.button() == Qt.LeftButton:
            self.setCursor(Qt.ArrowCursor)
            self.current_edit_rect = <span class="hljs-literal">None</span>
            self.on_left_btn = <span class="hljs-literal">False</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">judgeReigon</span>(<span class="hljs-params">self, pos</span>):</span>
        rect = self.frameGeometry()

        self.top_rect = QRect(rect.x()+self.Margins, rect.y(), rect.width()-self.Margins*<span class="hljs-number">2</span>, self.Margins)
        self.top_left_rect = QRect(rect.x(), rect.y(), self.Margins, self.Margins)
        self.left_rect = QRect(rect.x(), rect.y()+self.Margins, self.Margins, rect.height()-self.Margins*<span class="hljs-number">2</span>)
        self.bottom_left_rect = QRect(rect.x(), rect.y()+rect.height()-self.Margins, self.Margins, self.Margins)
        self.bottom_rect = QRect(rect.x()+self.Margins, rect.y()+rect.height()-self.Margins, rect.width()-self.Margins*<span class="hljs-number">2</span>, self.Margins)
        self.botton_right_rect = QRect(rect.x()+self.width()-self.Margins, rect.y()+rect.height()-self.Margins, self.Margins, self.Margins)
        self.right_rect = QRect(rect.x()+self.width()-self.Margins, rect.y()+self.Margins, self.Margins, rect.height()-self.Margins*<span class="hljs-number">2</span>)
        self.top_right_rect = QRect(rect.x()+self.width()-self.Margins, rect.y(), self.Margins, self.Margins)

        <span class="hljs-keyword">if</span> self.top_rect.contains(pos):
            self.setCursor(Qt.SizeVerCursor)
            self.current_edit_rect = <span class="hljs-string">&#x27;top_rect&#x27;</span>
        <span class="hljs-keyword">elif</span> self.top_left_rect.contains(pos):
            self.setCursor(Qt.SizeFDiagCursor)
            self.current_edit_rect = <span class="hljs-string">&#x27;top_left_rect&#x27;</span>
        <span class="hljs-keyword">elif</span> self.left_rect.contains(pos):
            self.setCursor(Qt.SizeHorCursor)
            self.current_edit_rect = <span class="hljs-string">&#x27;left_rect&#x27;</span>
        <span class="hljs-keyword">elif</span> self.bottom_left_rect.contains(pos):
            self.setCursor(Qt.SizeBDiagCursor)
            self.current_edit_rect = <span class="hljs-string">&#x27;bottom_left_rect&#x27;</span>
        <span class="hljs-keyword">elif</span> self.bottom_rect.contains(pos):
            self.setCursor(Qt.SizeVerCursor)
            self.current_edit_rect = <span class="hljs-string">&#x27;bottom_rect&#x27;</span>
        <span class="hljs-keyword">elif</span> self.botton_right_rect.contains(pos):
            self.setCursor(Qt.SizeFDiagCursor)
            self.current_edit_rect = <span class="hljs-string">&#x27;botton_right_rect&#x27;</span>
        <span class="hljs-keyword">elif</span> self.right_rect.contains(pos):
            self.setCursor(Qt.SizeHorCursor)
            self.current_edit_rect = <span class="hljs-string">&#x27;right_rect&#x27;</span>
        <span class="hljs-keyword">elif</span> self.top_right_rect.contains(pos):
            self.setCursor(Qt.SizeBDiagCursor)
            self.current_edit_rect = <span class="hljs-string">&#x27;top_right_rect&#x27;</span>
        <span class="hljs-keyword">else</span>:
            self.setCursor(Qt.ArrowCursor)
            self.current_edit_rect = <span class="hljs-literal">None</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resizeWin</span>(<span class="hljs-params">self, mgPos</span>):</span>
        <span class="hljs-keyword">if</span> self.current_edit_rect == <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">return</span>
        winX = self.geometry().x()
        winY = self.geometry().y()
        winW = self.geometry().width()
        winH = self.geometry().height()
        downside = self.pos().y() + winH
        rightside = self.pos().x() + winW
        <span class="hljs-keyword">if</span> self.current_edit_rect == <span class="hljs-string">&#x27;top_rect&#x27;</span>:
            winY = mgPos.y()
            winH = downside - winY
        <span class="hljs-keyword">elif</span> self.current_edit_rect == <span class="hljs-string">&#x27;top_left_rect&#x27;</span>:
            winY = mgPos.y()
            winH = downside - winY
            winX = mgPos.x()
            winW = rightside - winX
        <span class="hljs-keyword">elif</span> self.current_edit_rect == <span class="hljs-string">&#x27;left_rect&#x27;</span>:
            winX = mgPos.x()
            winW = rightside - winX
        <span class="hljs-keyword">elif</span> self.current_edit_rect == <span class="hljs-string">&#x27;bottom_left_rect&#x27;</span>:
            winX = mgPos.x()
            winW = rightside - winX
            winH = mgPos.y() - self.pos().y()
        <span class="hljs-keyword">elif</span> self.current_edit_rect == <span class="hljs-string">&#x27;botton_right_rect&#x27;</span>:
            winW = mgPos.x() - self.pos().x()
            winH = mgPos.y() - self.pos().y()
        <span class="hljs-keyword">elif</span> self.current_edit_rect == <span class="hljs-string">&#x27;right_rect&#x27;</span>:
            winW = mgPos.x() - self.pos().x()
        <span class="hljs-keyword">elif</span> self.current_edit_rect == <span class="hljs-string">&#x27;bottom_rect&#x27;</span>:
            winH = mgPos.y() - self.pos().y()
        <span class="hljs-keyword">elif</span> self.current_edit_rect == <span class="hljs-string">&#x27;top_right_rect&#x27;</span>:
            winY = mgPos.y()
            winH = downside - winY
            winW = mgPos.x() - self.pos().x()
        <span class="hljs-keyword">if</span> winW &lt; self.win_min_width:
            <span class="hljs-keyword">return</span>
        <span class="hljs-keyword">if</span> winH &lt; self.win_min_height:
            <span class="hljs-keyword">return</span>
        self.setGeometry(winX, winY, winW, winH)</code></pre></div>
<hr>
<h2 id="çª—å£åº”ç”¨ç”¨æˆ·é…ç½®"><a href="#çª—å£åº”ç”¨ç”¨æˆ·é…ç½®" class="headerlink" title="çª—å£åº”ç”¨ç”¨æˆ·é…ç½®"></a>çª—å£åº”ç”¨ç”¨æˆ·é…ç½®</h2><h3 id="å…³é—­æ—¶ä¿å­˜é…ç½®ä¿¡æ¯"><a href="#å…³é—­æ—¶ä¿å­˜é…ç½®ä¿¡æ¯" class="headerlink" title="å…³é—­æ—¶ä¿å­˜é…ç½®ä¿¡æ¯"></a>å…³é—­æ—¶ä¿å­˜é…ç½®ä¿¡æ¯</h3><p>&emsp;&emsp;å½“å·¥å…·å…³é—­æˆ–è€…é€€å‡ºæ—¶ï¼Œä¼šåœ¨ç”µè„‘æœ¬åœ°æ–‡æ¡£è·¯å¾„ä¸‹ç”Ÿæˆä¸€ä¸ªâ€œpopic_tool_config.jsonâ€æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶è®°å½•å·¥å…·çª—å£çš„ä½ç½®ã€å¤§å°ã€ç”¨æˆ·/ç®¡ç†å‘˜æ¨¡å¼ã€å½“å‰åˆ—è¡¨è§†å›¾æ˜¾ç¤ºæ¨¡å¼ã€å·¥å…·ç¼©æ”¾æ»‘å—æ¡æ•°å€¼å’Œå½“å‰æ˜¾ç¤ºç»„çš„ä¿¡æ¯ã€‚</p>
<div class="hljs"><pre><code class="hljs Python">USER_CONFIG_PATH = os.path.expanduser(<span class="hljs-string">&#x27;~/popic_tool_config.json&#x27;</span>)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShadowWidget</span>(<span class="hljs-params">QWidget</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">closeEvent</span>(<span class="hljs-params">self, event</span>):</span>
        super(ShadowWidget, self).closeEvent(event)
        user_config = &#123;
            <span class="hljs-string">&#x27;win_left&#x27;</span> : self.pos().x(),
            <span class="hljs-string">&#x27;win_top&#x27;</span> : self.pos().y(),
            <span class="hljs-string">&#x27;user_width&#x27;</span> : self.main_widget.UserViewWidth,
            <span class="hljs-string">&#x27;user_height&#x27;</span> : self.main_widget.UserViewHeight,
            <span class="hljs-string">&#x27;admin_width&#x27;</span> : self.main_widget.AdminViewWidth,
            <span class="hljs-string">&#x27;admin_height&#x27;</span> : self.main_widget.AdminViewHeight,
            <span class="hljs-string">&#x27;admin_mode&#x27;</span> : self.main_widget.AdminMode,
            <span class="hljs-string">&#x27;current_view&#x27;</span> : str(self.main_widget.UserView.viewMode()).split(<span class="hljs-string">&#x27;.&#x27;</span>)[<span class="hljs-number">-1</span>],
            <span class="hljs-string">&#x27;icon_slider_value&#x27;</span> : self.main_widget.size_slider.icon_mode_value,
            <span class="hljs-string">&#x27;list_slider_value&#x27;</span> : self.main_widget.size_slider.list_mode_value,
            <span class="hljs-string">&#x27;group_index&#x27;</span> : self.main_widget.group_combobox.currentIndex()
        &#125;

        <span class="hljs-keyword">with</span> open(USER_CONFIG_PATH, <span class="hljs-string">&#x27;w+&#x27;</span>) <span class="hljs-keyword">as</span> f:
            json_str = json.dumps(user_config, indent=<span class="hljs-number">4</span>)
            f.write(json_str)</code></pre></div>

<h3 id="æ‰“å¼€æ—¶è¯»å–é…ç½®ä¿¡æ¯"><a href="#æ‰“å¼€æ—¶è¯»å–é…ç½®ä¿¡æ¯" class="headerlink" title="æ‰“å¼€æ—¶è¯»å–é…ç½®ä¿¡æ¯"></a>æ‰“å¼€æ—¶è¯»å–é…ç½®ä¿¡æ¯</h3><p>&emsp;&emsp;å½“å·¥å…·å¯åŠ¨æ—¶ï¼Œå‡å¦‚ç”µè„‘æœ¬åœ°æ–‡æ¡£è·¯å¾„ä¸‹å­˜åœ¨â€œpopic_tool_config.jsonâ€æ–‡ä»¶ï¼Œåˆ™è¯»å–è¯¥æ–‡ä»¶ä¿¡æ¯å¹¶æ›´æ–°å·¥å…·æ˜¾ç¤ºï¼Œä»¥æ¢å¤ä¸å…³é—­å·¥å…·å‰ç›¸åŒçš„çŠ¶æ€ã€‚</p>
<p>&emsp;&emsp;å¦‚æœç”µè„‘æœ¬åœ°æ–‡æ¡£è·¯å¾„ä¸‹ä¸å­˜åœ¨â€œpopic_tool_config.jsonâ€æ–‡ä»¶ï¼Œåˆ™ä¼šä»¥é»˜è®¤é…ç½®å¯åŠ¨å·¥å…·ã€‚</p>
<div class="hljs"><pre><code class="hljs Python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShadowWidget</span>(<span class="hljs-params">QWidget</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">showEvent</span>(<span class="hljs-params">self, event</span>):</span>
        super(ShadowWidget, self).showEvent(event)
        <span class="hljs-keyword">if</span> os.path.exists(USER_CONFIG_PATH):
            <span class="hljs-keyword">with</span> open(USER_CONFIG_PATH, <span class="hljs-string">&#x27;r+&#x27;</span>) <span class="hljs-keyword">as</span> f:
                user_config = json.load(f)
            self.move(user_config[<span class="hljs-string">&#x27;win_left&#x27;</span>], user_config[<span class="hljs-string">&#x27;win_top&#x27;</span>])
            self.main_widget.UserViewWidth = user_config[<span class="hljs-string">&#x27;user_width&#x27;</span>]
            self.main_widget.UserViewHeight = user_config[<span class="hljs-string">&#x27;user_height&#x27;</span>]
            self.main_widget.AdminViewWidth = user_config[<span class="hljs-string">&#x27;admin_width&#x27;</span>]
            self.main_widget.AdminViewHeight = user_config[<span class="hljs-string">&#x27;admin_height&#x27;</span>]
            self.main_widget.group_combobox.setCurrentIndex(user_config[<span class="hljs-string">&#x27;group_index&#x27;</span>])
            self.main_widget.size_slider.icon_mode_value = user_config[<span class="hljs-string">&#x27;icon_slider_value&#x27;</span>]
            self.main_widget.size_slider.list_mode_value = user_config[<span class="hljs-string">&#x27;list_slider_value&#x27;</span>]
            admin_mode = user_config[<span class="hljs-string">&#x27;admin_mode&#x27;</span>]
            <span class="hljs-keyword">if</span> admin_mode <span class="hljs-keyword">and</span> self.main_widget.AdminView:
                <span class="hljs-keyword">pass</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">if</span> user_config[<span class="hljs-string">&#x27;current_view&#x27;</span>] == <span class="hljs-string">&#x27;IconMode&#x27;</span>:
                    self.main_widget.change_to_icon_mode()
                <span class="hljs-keyword">elif</span> user_config[<span class="hljs-string">&#x27;current_view&#x27;</span>] == <span class="hljs-string">&#x27;ListMode&#x27;</span>:
                    self.main_widget.change_to_list_mode()
        self.main_widget.resize_view()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resize</span>(<span class="hljs-params">self</span>):</span>
        super(ShadowWidget, self).resize(self.main_widget.width()+self.Margins + <span class="hljs-number">20</span>, self.main_widget.height()+self.Margins + <span class="hljs-number">20</span>)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToolWin</span>(<span class="hljs-params">QMainWindow</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resize_view</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">if</span> self.tool_view == self.AdminView:
            self.resize(self.AdminViewWidth, self.AdminViewHeight)
        <span class="hljs-keyword">else</span>:
            self.resize(self.UserViewWidth, self.UserViewHeight)
        self.parent().resize()</code></pre></div>

<hr>
<h2 id="è°ƒç”¨å·¥å…·"><a href="#è°ƒç”¨å·¥å…·" class="headerlink" title="è°ƒç”¨å·¥å…·"></a>è°ƒç”¨å·¥å…·</h2><h3 id="åœ¨-Windows-ä¸‹è°ƒç”¨å·¥å…·"><a href="#åœ¨-Windows-ä¸‹è°ƒç”¨å·¥å…·" class="headerlink" title="åœ¨ Windows ä¸‹è°ƒç”¨å·¥å…·"></a>åœ¨ Windows ä¸‹è°ƒç”¨å·¥å…·</h3><div class="hljs"><pre><code class="hljs Python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:
    app = QApplication(sys.argv)
    main_win = ToolWin()
    win = ShadowWidget(main_win)
    win.show()
    sys.exit(app.exec_())</code></pre></div>

<h3 id="åœ¨-Maya-ä¸‹è°ƒç”¨å·¥å…·"><a href="#åœ¨-Maya-ä¸‹è°ƒç”¨å·¥å…·" class="headerlink" title="åœ¨ Maya ä¸‹è°ƒç”¨å·¥å…·"></a>åœ¨ Maya ä¸‹è°ƒç”¨å·¥å…·</h3><div class="hljs"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maya_main</span>():</span>
    ptr = OpenMayaUI.MQtUtil.mainWindow()
    mayaWindow = wrapInstance(long(ptr), QWidget)
    win_obj = mayaWindow.findChild(QWidget, <span class="hljs-string">&#x27;popic_tool_window&#x27;</span>)
    <span class="hljs-keyword">if</span> win_obj:
        win_obj.close()
    <span class="hljs-keyword">else</span>:
        main_win = ToolWin()
        win_obj = ShadowWidget(main_win, mayaWindow)
        win_obj.setObjectName(<span class="hljs-string">&#x27;popic_tool_window&#x27;</span>)
    win_obj.show()

maya_main()</code></pre></div>

<hr>
<h2 id="è·å–-Maya-çš„-Icon-è·¯å¾„"><a href="#è·å–-Maya-çš„-Icon-è·¯å¾„" class="headerlink" title="è·å– Maya çš„ Icon è·¯å¾„"></a>è·å– Maya çš„ Icon è·¯å¾„</h2><p>&emsp;&emsp;å¾ˆå¤š Maya çš„å·¥å…·æ˜¾ç¤ºä½¿ç”¨çš„æ˜¯ Maya è‡ªå¸¦çš„å›¾æ ‡ï¼Œè¿™äº›å›¾æ ‡è·¯å¾„å¯ä»¥é€šè¿‡å‡ ä¸ªåœ°æ–¹æ‰¾åˆ°ã€‚</p>
<h3 id="XBMLANGPATH"><a href="#XBMLANGPATH" class="headerlink" title="XBMLANGPATH"></a>XBMLANGPATH</h3><p>&emsp;&emsp;Icon è·¯å¾„ï¼Œåœ¨è¯¥å˜é‡ä¸‹çš„è·¯å¾„ä¸­çš„å›¾ç‰‡æ–‡ä»¶å¯ä»¥ç›´æ¥ç”¨æ¥å½“ä½œç•Œé¢æ§ä»¶çš„å›¾æ ‡ã€‚  </p>
<ol>
<li>è¿è¡Œ mel å‘½ä»¤ <code>xbmLangPathList;</code> å¯ä»¥æŸ¥çœ‹ icon è·¯å¾„ã€‚  </li>
<li>ä¹Ÿå¯ä»¥é€šè¿‡æŸ¥è¯¢ç¯å¢ƒå˜é‡ <code>os.environ[&#39;XBMLANGPATH&#39;]</code>  æŸ¥çœ‹è·¯å¾„ã€‚</li>
</ol>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Qt/">Qt</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Qt/">Qt</a>
                    
                      <a class="hover-with-bg" href="/tags/Maya/">Maya</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/10/12/maya/Maya%E5%88%B6%E4%BD%9C%E6%96%87%E4%BB%B6%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Mayaåˆ¶ä½œæ–‡ä»¶é—®é¢˜é›†åˆ</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/10/09/script/Git%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AASSH-key/">
                        <span class="hidden-mobile">Gité…ç½®å¤šä¸ªSSH-key</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '#post-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "å·¥å…·æ¶ç•Œé¢å¼€å‘&nbsp;",
      ],
      cursorChar: "ğŸ’–",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>







  
  
    <script>
      !function (e, t, a) {
        function r() {
          for (var e = 0; e < s.length; e++) s[e].alpha <= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = "left:" + s[e].x + "px;top:" + s[e].y + "px;opacity:" + s[e].alpha + ";transform:scale(" + s[e].scale + "," + s[e].scale + ") rotate(45deg);background:" + s[e].color + ";z-index:99999");
          requestAnimationFrame(r)
        }

        function n() {
          var t = "function" == typeof e.onclick && e.onclick;
          e.onclick = function (e) {
            t && t(), o(e)
          }
        }

        function o(e) {
          var a = t.createElement("div");
          a.className = "heart", s.push({
            el: a,
            x: e.clientX - 5,
            y: e.clientY - 5,
            scale: 1,
            alpha: 1,
            color: c()
          }), t.body.appendChild(a)
        }

        function i(e) {
          var a = t.createElement("style");
          a.type = "text/css";
          try {
            a.appendChild(t.createTextNode(e))
          } catch (t) {
            a.styleSheet.cssText = e
          }
          t.getElementsByTagName("head")[0].appendChild(a)
        }

        function c() {
          return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
        }

        var s = [];
        e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) {
          setTimeout(e, 1e3 / 60)
        }, i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), n(), r()
      }(window, document);
    </script>
  











  

  

  

  

  

  

  





</body>
</html>
